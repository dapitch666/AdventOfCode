package org.anne.aoc2019;

import org.anne.common.Utils;
import org.junit.jupiter.api.Test;

import java.util.ArrayList;
import java.util.List;

import static org.junit.jupiter.api.Assertions.*;

class Day20Test {

    @Test
    void testMap() {
        Day20.DonutMaze maze = Day20.getPortalCodes(input);
        String expected = """
                              ##               \s
                              ##################
                              ##              ##
                              ##              ##
                              ##              ##
                                              ##
                ######                        ##
                    ##                        ##
                    ######                    ##
                                              ##
                                  ##          ##
                ####              ######      ##
                  ##                  ##      ##
                ####                  ##########
                                      ##       \s
                """;
        assertEquals(expected, Utils.printAscii(maze.pathway()));
        assertEquals(47, maze.pathway().size());
    }

    @Test
    void part1() {
        assertEquals(23, Day20.part1(input));
        assertEquals(58, Day20.part1(input2));
    }

    @Test
    void part2() {
        assertEquals(396, Day20.part2(input3));
    }
    
    final List<String> input = new ArrayList<>(List.of(
            "         A         ",
            "         A         ",
            "  #######.#########",
            "  #######.........#",
            "  #######.#######.#",
            "  #######.#######.#",
            "  #######.#######.#",
            "  #####  B    ###.#",
            "BC...##  C    ###.#",
            "  ##.##       ###.#",
            "  ##...DE  F  ###.#",
            "  #####    G  ###.#",
            "  #########.#####.#",
            "DE..#######...###.#",
            "  #.#########.###.#",
            "FG..#########.....#",
            "  ###########.#####",
            "             Z     ",
            "             Z     "
    ));

    final List<String> input2 = new ArrayList<>(List.of(
            "                   A               ",
            "                   A               ",
            "  #################.#############  ",
            "  #.#...#...................#.#.#  ",
            "  #.#.#.###.###.###.#########.#.#  ",
            "  #.#.#.......#...#.....#.#.#...#  ",
            "  #.#########.###.#####.#.#.###.#  ",
            "  #.............#.#.....#.......#  ",
            "  ###.###########.###.#####.#.#.#  ",
            "  #.....#        A   C    #.#.#.#  ",
            "  #######        S   P    #####.#  ",
            "  #.#...#                 #......VT",
            "  #.#.#.#                 #.#####  ",
            "  #...#.#               YN....#.#  ",
            "  #.###.#                 #####.#  ",
            "DI....#.#                 #.....#  ",
            "  #####.#                 #.###.#  ",
            "ZZ......#               QG....#..AS",
            "  ###.###                 #######  ",
            "JO..#.#.#                 #.....#  ",
            "  #.#.#.#                 ###.#.#  ",
            "  #...#..DI             BU....#..LF",
            "  #####.#                 #.#####  ",
            "YN......#               VT..#....QG",
            "  #.###.#                 #.###.#  ",
            "  #.#...#                 #.....#  ",
            "  ###.###    J L     J    #.#.###  ",
            "  #.....#    O F     P    #.#...#  ",
            "  #.###.#####.#.#####.#####.###.#  ",
            "  #...#.#.#...#.....#.....#.#...#  ",
            "  #.#####.###.###.#.#.#########.#  ",
            "  #...#.#.....#...#.#.#.#.....#.#  ",
            "  #.###.#####.###.###.#.#.#######  ",
            "  #.#.........#...#.............#  ",
            "  #########.###.###.#############  ",
            "           B   J   C               ",
            "           U   P   P               "
    ));
    
    final List<String> input3 = new ArrayList<>(List.of(
                    "             Z L X W       C                 ",
                    "             Z P Q B       K                 ",
                    "  ###########.#.#.#.#######.###############  ",
                    "  #...#.......#.#.......#.#.......#.#.#...#  ",
                    "  ###.#.#.#.#.#.#.#.###.#.#.#######.#.#.###  ",
                    "  #.#...#.#.#...#.#.#...#...#...#.#.......#  ",
                    "  #.###.#######.###.###.#.###.###.#.#######  ",
                    "  #...#.......#.#...#...#.............#...#  ",
                    "  #.#########.#######.#.#######.#######.###  ",
                    "  #...#.#    F       R I       Z    #.#.#.#  ",
                    "  #.###.#    D       E C       H    #.#.#.#  ",
                    "  #.#...#                           #...#.#  ",
                    "  #.###.#                           #.###.#  ",
                    "  #.#....OA                       WB..#.#..ZH",
                    "  #.###.#                           #.#.#.#  ",
                    "CJ......#                           #.....#  ",
                    "  #######                           #######  ",
                    "  #.#....CK                         #......IC",
                    "  #.###.#                           #.###.#  ",
                    "  #.....#                           #...#.#  ",
                    "  ###.###                           #.#.#.#  ",
                    "XF....#.#                         RF..#.#.#  ",
                    "  #####.#                           #######  ",
                    "  #......CJ                       NM..#...#  ",
                    "  ###.#.#                           #.###.#  ",
                    "RE....#.#                           #......RF",
                    "  ###.###        X   X       L      #.#.#.#  ",
                    "  #.....#        F   Q       P      #.#.#.#  ",
                    "  ###.###########.###.#######.#########.###  ",
                    "  #.....#...#.....#.......#...#.....#.#...#  ",
                    "  #####.#.###.#######.#######.###.###.#.#.#  ",
                    "  #.......#.......#.#.#.#.#...#...#...#.#.#  ",
                    "  #####.###.#####.#.#.#.#.###.###.#.###.###  ",
                    "  #.......#.....#.#...#...............#...#  ",
                    "  #############.#.#.###.###################  ",
                    "               A O F   N                     ",
                    "               A A D   M                     "
    ));
}